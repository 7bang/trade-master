# ê±°ë˜ì˜ì¥ì¸ - í†µí•© ê¸°ìˆ  ë¬¸ì„œ ğŸ“š

> ê°œë°œ ì´ˆë³´ìë„ ì‰½ê²Œ ë”°ë¼í•  ìˆ˜ ìˆëŠ” ì™„ì „í•œ ê°œë°œ ê°€ì´ë“œ

**ë¬¸ì„œ ë²„ì „**: 2.0  
**ìµœì¢… ìˆ˜ì •**: 2024-11-15  
**ê°œë°œ ê¸°ê°„**: 6ì£¼ (Phase 1 MVP)

---

## ğŸ“‘ ëª©ì°¨

1. [í”„ë¡œì íŠ¸ ê°œìš”](#1-í”„ë¡œì íŠ¸-ê°œìš”)
2. [ê¸°ìˆ  ìŠ¤íƒ](#2-ê¸°ìˆ -ìŠ¤íƒ)
3. [ê°œë°œ í™˜ê²½ ì„¤ì •](#3-ê°œë°œ-í™˜ê²½-ì„¤ì •)
4. [ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„](#4-ë°ì´í„°ë² ì´ìŠ¤-ì„¤ê³„)
5. [í”„ë¡œì íŠ¸ êµ¬ì¡°](#5-í”„ë¡œì íŠ¸-êµ¬ì¡°)
6. [í•µì‹¬ ê¸°ëŠ¥ êµ¬í˜„](#6-í•µì‹¬-ê¸°ëŠ¥-êµ¬í˜„)
7. [ì¹´ì¹´ì˜¤í†¡ ê³µìœ  ê¸°ëŠ¥](#7-ì¹´ì¹´ì˜¤í†¡-ê³µìœ -ê¸°ëŠ¥)
8. [ìƒíƒœ ê´€ë¦¬](#8-ìƒíƒœ-ê´€ë¦¬)
9. [í™”ë©´ë³„ êµ¬í˜„ ê°€ì´ë“œ](#9-í™”ë©´ë³„-êµ¬í˜„-ê°€ì´ë“œ)
10. [í…ŒìŠ¤íŠ¸ ë° ë°°í¬](#10-í…ŒìŠ¤íŠ¸-ë°-ë°°í¬)
11. [Phaseë³„ ê°œë°œ ë¡œë“œë§µ](#11-phaseë³„-ê°œë°œ-ë¡œë“œë§µ)
12. [FAQ](#12-ìì£¼-ë¬»ëŠ”-ì§ˆë¬¸)

---

## 1. í”„ë¡œì íŠ¸ ê°œìš”

### 1.1 í”„ë¡œì íŠ¸ ì†Œê°œ

**ê±°ë˜ì˜ì¥ì¸**ì€ ì†Œìƒê³µì¸ê³¼ ìœ í†µì—…ì²´ê°€ ê±°ë˜ì²˜ì™€ì˜ ê±°ë˜ ë‚´ì—­ì„ ì‰½ê²Œ ê¸°ë¡í•˜ê³  ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” ëª¨ë°”ì¼ ê±°ë˜ì¥ ì•±ì…ë‹ˆë‹¤.

**í•µì‹¬ ê°€ì¹˜:**
- ğŸ“± **ê°„í¸í•œ ê±°ë˜ ì…ë ¥**: 10ì´ˆ ì•ˆì— ê±°ë˜ ê¸°ë¡
- ğŸ” **ì‹¤ì‹œê°„ ì”ì•¡ í™•ì¸**: ê±°ë˜ì²˜ë³„ ìë™ ê³„ì‚°
- ğŸ’¬ **ì¹´í†¡ ê³µìœ **: ì˜ˆìœ ê±°ë˜ ëª…ì„¸ì„œë¥¼ ì¹´ì¹´ì˜¤í†¡ìœ¼ë¡œ ì¦‰ì‹œ ì „ì†¡

### 1.2 MVP ë²”ìœ„ (Phase 1)

**âœ… í¬í•¨ë˜ëŠ” ê¸°ëŠ¥**
- ê±°ë˜ì²˜ ê´€ë¦¬ (CRUD)
- **í’ˆëª© ê´€ë¦¬ (CRUD)** â­
- ê±°ë˜ ê´€ë¦¬ (CRUD - ìƒì„±/ì¡°íšŒ/ìˆ˜ì •/ì‚­ì œ)
- ê±°ë˜ì²˜ë³„ ì”ì•¡ ìë™ ê³„ì‚°
- ê±°ë˜ ë‚´ì—­ ì¹´ì¹´ì˜¤í†¡ ê³µìœ 

**âŒ ì œì™¸ë˜ëŠ” ê¸°ëŠ¥ (Phase 2 ì´í›„)**
- ë‹¤ì¤‘ ì‚¬ìš©ì (ì§ì› ê´€ë¦¬)
- í†µê³„/ì°¨íŠ¸
- PDF ìƒì„±
- ì•Œë¦¼ ê¸°ëŠ¥
- ì¬ê³  ê´€ë¦¬

### 1.3 ê°œë°œ ëª©í‘œ

| í•­ëª© | ëª©í‘œ |
|------|------|
| ê°œë°œ ê¸°ê°„ | 6ì£¼ |
| ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸” | 5ê°œ |
| ì£¼ìš” í™”ë©´ | 6ê°œ |
| í•µì‹¬ ê¸°ëŠ¥ | ì¹´ì¹´ì˜¤í†¡ ê³µìœ  |
| ì¶œì‹œ í”Œë«í¼ | Android (Play Store) |

---

## 2. ê¸°ìˆ  ìŠ¤íƒ

### 2.1 í”„ë¡ íŠ¸ì—”ë“œ

```yaml
Framework: Flutter 3.24.0+
Language: Dart 3.5.0+
```

**ì£¼ìš” íŒ¨í‚¤ì§€:**

```yaml
dependencies:
  # ë°±ì—”ë“œ
  supabase_flutter: ^2.5.0
  
  # ìƒíƒœ ê´€ë¦¬
  flutter_riverpod: ^2.5.0
  
  # ë¼ìš°íŒ…
  go_router: ^14.0.0
  
  # í•µì‹¬ ê¸°ëŠ¥: ê³µìœ 
  screenshot: ^3.0.0
  share_plus: ^10.0.0
  path_provider: ^2.1.3
  
  # ìœ í‹¸ë¦¬í‹°
  intl: ^0.19.0                    # ë‚ ì§œ/ê¸ˆì•¡ í¬ë§·
  freezed_annotation: ^2.4.0       # ë¶ˆë³€ ëª¨ë¸
  json_annotation: ^4.8.0          # JSON ì§ë ¬í™”
  
dev_dependencies:
  build_runner: ^2.4.0
  freezed: ^2.4.0
  json_serializable: ^6.7.0
```

### 2.2 ë°±ì—”ë“œ

**Supabase (BaaS)**
- PostgreSQL ë°ì´í„°ë² ì´ìŠ¤
- Authentication (ì´ë©”ì¼/ë¹„ë°€ë²ˆí˜¸)
- Row Level Security (RLS)
- REST API & Realtime

### 2.3 ê¸°ìˆ  ì„ íƒ ì´ìœ 

| ê¸°ìˆ  | ì„ íƒ ì´ìœ  |
|------|-----------|
| **Flutter** | â€¢ í•˜ë‚˜ì˜ ì½”ë“œë¡œ Android/iOS ë™ì‹œ ê°œë°œ<br>â€¢ ë¹ ë¥¸ ê°œë°œ ì†ë„ (Hot Reload)<br>â€¢ ì•„ë¦„ë‹¤ìš´ UI ì‰½ê²Œ êµ¬í˜„ |
| **Supabase** | â€¢ ë°±ì—”ë“œ ì„œë²„ êµ¬ì¶• ë¶ˆí•„ìš”<br>â€¢ ë¬´ë£Œ í”Œëœìœ¼ë¡œ ì‹œì‘ ê°€ëŠ¥<br>â€¢ ìë™ API ìƒì„±<br>â€¢ ì‹¤ì‹œê°„ ë°ì´í„° ë™ê¸°í™” |
| **Riverpod** | â€¢ Flutter ê³µì‹ ì¶”ì²œ ìƒíƒœ ê´€ë¦¬<br>â€¢ íƒ€ì… ì•ˆì „ì„±<br>â€¢ í…ŒìŠ¤íŠ¸í•˜ê¸° ì‰¬ì›€ |

---

## 3. ê°œë°œ í™˜ê²½ ì„¤ì •

### 3.1 í•„ìˆ˜ ë„êµ¬ ì„¤ì¹˜

#### Step 1: Flutter ì„¤ì¹˜

**Windows:**
```bash
# Flutter SDK ë‹¤ìš´ë¡œë“œ
# https://docs.flutter.dev/get-started/install/windows

# í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
# Pathì— flutter\bin ì¶”ê°€

# ì„¤ì¹˜ í™•ì¸
flutter doctor
```

**macOS:**
```bash
# Homebrewë¡œ ì„¤ì¹˜
brew install flutter

# ì„¤ì¹˜ í™•ì¸
flutter doctor
```

#### Step 2: ì—ë””í„° ì„¤ì •

**VS Code (ì¶”ì²œ):**
```bash
# VS Code ì„¤ì¹˜ í›„ Extensions ì„¤ì¹˜:
- Flutter
- Dart
- Riverpod Snippets
```

**Android Studio:**
```bash
# Android Studio ì„¤ì¹˜
# Flutter í”ŒëŸ¬ê·¸ì¸ ì„¤ì¹˜
# Dart í”ŒëŸ¬ê·¸ì¸ ì„¤ì¹˜
```

### 3.2 Supabase í”„ë¡œì íŠ¸ ì„¤ì •

#### Step 1: í”„ë¡œì íŠ¸ ìƒì„±

```bash
1. https://supabase.com ì ‘ì†
2. "New Project" í´ë¦­
3. í”„ë¡œì íŠ¸ ì •ë³´ ì…ë ¥:
   - Name: trade-master
   - Database Password: (ì•ˆì „í•œ ë¹„ë°€ë²ˆí˜¸ ìƒì„±)
   - Region: Northeast Asia (Seoul)
4. "Create new project" í´ë¦­
```

#### Step 2: í”„ë¡œì íŠ¸ ì •ë³´ ì €ì¥

```bash
í”„ë¡œì íŠ¸ ì„¤ì •ì—ì„œ ë‹¤ìŒ ì •ë³´ ë³µì‚¬:
- Project URL : https://eloztkamiaemnscndlqb.supabase.co
- anon public key : eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVsb3p0a2FtaWFlbW5zY25kbHFiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQwNjkyMTEsImV4cCI6MjA3OTY0NTIxMX0.wX5yii0Cehp5v_6okoQFcQCVEU0Tz-ouOBevrMldBDE
```

**ì €ì¥í•  ìœ„ì¹˜: `lib/config/supabase_config.dart`**
```dart
class SupabaseConfig {
  static const String url = 'YOUR_SUPABASE_URL';
  static const String anonKey = 'YOUR_SUPABASE_ANON_KEY';
}
```

### 3.3 Flutter í”„ë¡œì íŠ¸ ìƒì„±

```bash
# í”„ë¡œì íŠ¸ ìƒì„±
flutter create trade_master
cd trade_master

# íŒ¨í‚¤ì§€ ì„¤ì¹˜
flutter pub get

# ì‹¤í–‰ í™•ì¸
flutter run
```

---

## 4. ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„

### 4.1 ì „ì²´ ERD

```
users (Supabase Auth)
  |
  | 1:1
  |
businesses (ì‚¬ì—…ì¥)
  |
  â”œâ”€ 1:N â”€> customers (ê±°ë˜ì²˜)
  |           |
  â”œâ”€ 1:N â”€> products (í’ˆëª©)
  |           |
  â””â”€ 1:N â”€â”€â”€â”€>â””â”€ 1:N â”€> transactions (ê±°ë˜)
                         - product_id (ì„ íƒ)
                         - quantity (ì„ íƒ)
                         - unit_price (ì„ íƒ)
```

### 4.2 í…Œì´ë¸” ì„¤ê³„

#### ğŸ“‹ businesses (ì‚¬ì—…ì¥)

**ìš©ë„**: ì‚¬ìš©ìì˜ ì‚¬ì—…ì¥ ì •ë³´

```sql
CREATE TABLE businesses (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES auth.users(id) NOT NULL UNIQUE,
  name VARCHAR(100) NOT NULL,              -- ê°€ê²Œ ì´ë¦„
  phone VARCHAR(20),                       -- ì—°ë½ì²˜
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- ì¸ë±ìŠ¤
CREATE INDEX idx_businesses_user_id ON businesses(user_id);

-- RLS
ALTER TABLE businesses ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can only view their own business"
  ON businesses FOR SELECT
  USING (auth.uid() = user_id);

CREATE POLICY "Users can only update their own business"
  ON businesses FOR UPDATE
  USING (auth.uid() = user_id);
```

**ì˜ˆì‹œ ë°ì´í„°:**
```
id: 550e8400-e29b-41d4-a716-446655440000
user_id: authì‚¬ìš©ìID
name: "ì œì£¼ ì²­ê³¼ë¬¼ ê°€ê²Œ"
phone: "010-1234-5678"
```

#### ğŸ“‹ customers (ê±°ë˜ì²˜)

**ìš©ë„**: ê±°ë˜í•˜ëŠ” ìƒëŒ€ë°© ì •ë³´

```sql
CREATE TABLE customers (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  business_id UUID REFERENCES businesses(id) ON DELETE CASCADE NOT NULL,
  name VARCHAR(100) NOT NULL,              -- ê±°ë˜ì²˜ ì´ë¦„
  phone VARCHAR(20),                       -- ê±°ë˜ì²˜ ì—°ë½ì²˜
  memo TEXT,                               -- ë©”ëª¨
  is_active BOOLEAN DEFAULT TRUE,          -- í™œì„± ì—¬ë¶€
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- ì¸ë±ìŠ¤
CREATE INDEX idx_customers_business_id ON customers(business_id);
CREATE INDEX idx_customers_name ON customers(name);
CREATE INDEX idx_customers_is_active ON customers(is_active);

-- RLS
ALTER TABLE customers ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can view their business customers"
  ON customers FOR SELECT
  USING (
    business_id IN (
      SELECT id FROM businesses WHERE user_id = auth.uid()
    )
  );

CREATE POLICY "Users can manage their business customers"
  ON customers FOR ALL
  USING (
    business_id IN (
      SELECT id FROM businesses WHERE user_id = auth.uid()
    )
  );
```

**ì˜ˆì‹œ ë°ì´í„°:**
```
id: 660e8400-e29b-41d4-a716-446655440111
business_id: 550e8400-e29b-41d4-a716-446655440000
name: "ì„œìš¸ ì²­ê³¼ ë„ë§¤"
phone: "010-9876-5432"
```

#### ğŸ“‹ products (í’ˆëª©)

**ìš©ë„**: ìì£¼ ê±°ë˜í•˜ëŠ” í’ˆëª© ë“±ë¡ ë° ê´€ë¦¬

```sql
CREATE TABLE products (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  business_id UUID REFERENCES businesses(id) ON DELETE CASCADE NOT NULL,
  
  -- í’ˆëª© ê¸°ë³¸ ì •ë³´
  name VARCHAR(100) NOT NULL,              -- í’ˆëª©ëª…
  code VARCHAR(50),                        -- í’ˆëª© ì½”ë“œ (ì„ íƒ)
  category VARCHAR(50),                    -- ì¹´í…Œê³ ë¦¬ (ì˜ˆ: ê³¼ì¼, ì±„ì†Œ)
  
  -- ê°€ê²© ì •ë³´
  default_unit_price DECIMAL(15, 2),       -- ê¸°ë³¸ ë‹¨ê°€
  unit VARCHAR(20) DEFAULT 'ê°œ',           -- ë‹¨ìœ„ (ê°œ, kg, box ë“±)
  
  -- ì¶”ê°€ ì •ë³´
  description TEXT,                        -- ì„¤ëª…
  
  is_active BOOLEAN DEFAULT TRUE,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- ì¸ë±ìŠ¤
CREATE INDEX idx_products_business_id ON products(business_id);
CREATE INDEX idx_products_name ON products(name);
CREATE INDEX idx_products_category ON products(category);
CREATE INDEX idx_products_is_active ON products(is_active);

-- í’ˆëª© ì½”ë“œëŠ” ì‚¬ì—…ì¥ ë‚´ì—ì„œ ê³ ìœ 
CREATE UNIQUE INDEX idx_products_business_code 
  ON products(business_id, code) 
  WHERE code IS NOT NULL;

-- RLS
ALTER TABLE products ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can view their business products"
  ON products FOR SELECT
  USING (
    business_id IN (
      SELECT id FROM businesses WHERE user_id = auth.uid()
    )
  );

CREATE POLICY "Users can manage their business products"
  ON products FOR ALL
  USING (
    business_id IN (
      SELECT id FROM businesses WHERE user_id = auth.uid()
    )
  );
```

**ì˜ˆì‹œ ë°ì´í„°:**
```
id: 880e8400-e29b-41d4-a716-446655440333
business_id: 550e8400-e29b-41d4-a716-446655440000
name: "í•œë¼ë´‰"
code: "FRUIT-001"
category: "ê³¼ì¼"
default_unit_price: 8000.00
unit: "kg"
description: "ì œì£¼ì‚° í•œë¼ë´‰"
```

#### ğŸ“‹ transactions (ê±°ë˜)

**ìš©ë„**: ì‹¤ì œ ê±°ë˜ ë‚´ì—­

```sql
-- ê±°ë˜ ìœ í˜• ì •ì˜
CREATE TYPE simple_transaction_type AS ENUM (
  'receivable',  -- ë°›ì„ ëˆ (ë§¤ì¶œ/ì…ê¸ˆ)
  'payable'      -- ì¤„ ëˆ (ë§¤ì…/ì¶œê¸ˆ)
);

CREATE TABLE transactions (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  business_id UUID REFERENCES businesses(id) ON DELETE CASCADE NOT NULL,
  customer_id UUID REFERENCES customers(id) ON DELETE CASCADE NOT NULL,
  
  type simple_transaction_type NOT NULL,   -- ê±°ë˜ ìœ í˜•
  
  -- í’ˆëª© ì •ë³´ (ì„ íƒì‚¬í•­)
  product_id UUID REFERENCES products(id) ON DELETE SET NULL,
  quantity DECIMAL(15, 3),                 -- ìˆ˜ëŸ‰ (ì†Œìˆ˜ì  3ìë¦¬)
  unit_price DECIMAL(15, 2),               -- ë‹¨ê°€
  
  amount DECIMAL(15, 2) NOT NULL,          -- ì´ ê¸ˆì•¡
  date DATE NOT NULL DEFAULT CURRENT_DATE, -- ê±°ë˜ ë‚ ì§œ
  memo TEXT,                               -- ë©”ëª¨
  
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- ì¸ë±ìŠ¤ (ì¡°íšŒ ì†ë„ í–¥ìƒ)
CREATE INDEX idx_transactions_business_id ON transactions(business_id);
CREATE INDEX idx_transactions_customer_id ON transactions(customer_id);
CREATE INDEX idx_transactions_product_id ON transactions(product_id);
CREATE INDEX idx_transactions_date ON transactions(date DESC);
CREATE INDEX idx_transactions_type ON transactions(type);

-- RLS
ALTER TABLE transactions ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can view their business transactions"
  ON transactions FOR SELECT
  USING (
    business_id IN (
      SELECT id FROM businesses WHERE user_id = auth.uid()
    )
  );

CREATE POLICY "Users can manage their business transactions"
  ON transactions FOR ALL
  USING (
    business_id IN (
      SELECT id FROM businesses WHERE user_id = auth.uid()
    )
  );
```

**ê±°ë˜ ì…ë ¥ ë°©ì‹:**

**ë°©ë²• 1: í’ˆëª© ì„ íƒ (ì¶”ì²œ)**
```sql
-- "í•œë¼ë´‰ 10kgì„ kgë‹¹ 8,000ì›ì— íŒë§¤"
INSERT INTO transactions (
  business_id, customer_id, type,
  product_id, quantity, unit_price, amount
) VALUES (
  'ì‚¬ì—…ì¥ID', 'ê±°ë˜ì²˜ID', 'receivable',
  'í•œë¼ë´‰ID', 10, 8000, 80000
);
```

**ë°©ë²• 2: ì§ì ‘ ì…ë ¥**
```sql
-- "ê¸°íƒ€ ê±°ë˜ 50,000ì›"
INSERT INTO transactions (
  business_id, customer_id, type, amount, memo
) VALUES (
  'ì‚¬ì—…ì¥ID', 'ê±°ë˜ì²˜ID', 'receivable', 50000, 'ê¸°íƒ€ ë¬¼í’ˆ'
);
```

### 4.3 ìœ ìš©í•œ í•¨ìˆ˜ (RPC)

#### ê±°ë˜ì²˜ë³„ ì”ì•¡ ê³„ì‚°

```sql
CREATE OR REPLACE FUNCTION get_customer_balance(
  p_customer_id UUID
)
RETURNS DECIMAL(15, 2)
LANGUAGE plpgsql
AS $$
DECLARE
  v_balance DECIMAL(15, 2);
BEGIN
  SELECT 
    SUM(
      CASE 
        WHEN type = 'receivable' THEN amount
        WHEN type = 'payable' THEN -amount
      END
    )
  INTO v_balance
  FROM transactions
  WHERE customer_id = p_customer_id;
  
  RETURN COALESCE(v_balance, 0);
END;
$$;
```

**ì‚¬ìš© ì˜ˆì‹œ:**
```dart
// Flutterì—ì„œ í˜¸ì¶œ
final balance = await supabase
  .rpc('get_customer_balance', params: {'p_customer_id': customerId});
```

---

## 5. í”„ë¡œì íŠ¸ êµ¬ì¡°

### 5.1 í´ë” êµ¬ì¡°

```
trade_master/
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ main.dart                      # ì•± ì§„ì…ì 
â”‚   â”‚
â”‚   â”œâ”€â”€ config/                        # ì„¤ì • íŒŒì¼
â”‚   â”‚   â”œâ”€â”€ supabase_config.dart
â”‚   â”‚   â””â”€â”€ app_theme.dart
â”‚   â”‚
â”‚   â”œâ”€â”€ models/                        # ë°ì´í„° ëª¨ë¸
â”‚   â”‚   â”œâ”€â”€ business.dart
â”‚   â”‚   â”œâ”€â”€ customer.dart
â”‚   â”‚   â”œâ”€â”€ product.dart              # í’ˆëª© ëª¨ë¸
â”‚   â”‚   â””â”€â”€ transaction.dart
â”‚   â”‚
â”‚   â”œâ”€â”€ providers/                     # ìƒíƒœ ê´€ë¦¬
â”‚   â”‚   â”œâ”€â”€ auth_provider.dart
â”‚   â”‚   â”œâ”€â”€ business_provider.dart
â”‚   â”‚   â”œâ”€â”€ customer_provider.dart
â”‚   â”‚   â”œâ”€â”€ product_provider.dart     # í’ˆëª© Provider
â”‚   â”‚   â””â”€â”€ transaction_provider.dart
â”‚   â”‚
â”‚   â”œâ”€â”€ screens/                       # í™”ë©´
â”‚   â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”‚   â”œâ”€â”€ login_screen.dart
â”‚   â”‚   â”‚   â””â”€â”€ signup_screen.dart
â”‚   â”‚   â”œâ”€â”€ customer/
â”‚   â”‚   â”‚   â”œâ”€â”€ customer_list_screen.dart
â”‚   â”‚   â”‚   â”œâ”€â”€ customer_detail_screen.dart
â”‚   â”‚   â”‚   â””â”€â”€ customer_form_screen.dart
â”‚   â”‚   â”œâ”€â”€ product/                   # í’ˆëª© í™”ë©´
â”‚   â”‚   â”‚   â”œâ”€â”€ product_list_screen.dart
â”‚   â”‚   â”‚   â””â”€â”€ product_form_screen.dart
â”‚   â”‚   â””â”€â”€ transaction/
â”‚   â”‚       â”œâ”€â”€ transaction_form_screen.dart
â”‚   â”‚       â”œâ”€â”€ transaction_detail_screen.dart
â”‚   â”‚       â””â”€â”€ transaction_edit_screen.dart
â”‚   â”‚
â”‚   â”œâ”€â”€ widgets/                       # ì¬ì‚¬ìš© ìœ„ì ¯
â”‚   â”‚   â”œâ”€â”€ balance_card.dart
â”‚   â”‚   â”œâ”€â”€ transaction_list_item.dart
â”‚   â”‚   â””â”€â”€ receipt_widget.dart
â”‚   â”‚
â”‚   â”œâ”€â”€ services/                      # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”‚   â”œâ”€â”€ supabase_service.dart
â”‚   â”‚   â””â”€â”€ share_service.dart         # ê³µìœ  ê¸°ëŠ¥
â”‚   â”‚
â”‚   â””â”€â”€ utils/                         # ìœ í‹¸ë¦¬í‹°
â”‚       â”œâ”€â”€ formatters.dart
â”‚       â””â”€â”€ validators.dart
â”‚
â”œâ”€â”€ test/                              # í…ŒìŠ¤íŠ¸
â”œâ”€â”€ pubspec.yaml                       # íŒ¨í‚¤ì§€ ì„¤ì •
â””â”€â”€ README.md
```

### 5.2 main.dart ì„¤ì •

```dart
import 'package:flutter/material.dart';
import 'package:flutter_riverpod/flutter_riverpod.dart';
import 'package:supabase_flutter/supabase_flutter.dart';
import 'package:go_router/go_router.dart';

import 'config/supabase_config.dart';
import 'config/app_theme.dart';

void main() async {
  // Flutter ì´ˆê¸°í™”
  WidgetsFlutterBinding.ensureInitialized();
  
  // Supabase ì´ˆê¸°í™”
  await Supabase.initialize(
    url: SupabaseConfig.url,
    anonKey: SupabaseConfig.anonKey,
  );
  
  // ì•± ì‹¤í–‰
  runApp(
    const ProviderScope(  // Riverpodì„ ìœ„í•œ ë˜í¼
      child: MyApp(),
    ),
  );
}

class MyApp extends ConsumerWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context, WidgetRef ref) {
    return MaterialApp.router(
      title: 'ê±°ë˜ì˜ì¥ì¸',
      theme: AppTheme.lightTheme,
      darkTheme: AppTheme.darkTheme,
      routerConfig: _router,
    );
  }
}

// ë¼ìš°í„° ì„¤ì •
final _router = GoRouter(
  routes: [
    GoRoute(
      path: '/',
      builder: (context, state) => const LoginScreen(),
    ),
    GoRoute(
      path: '/customers',
      builder: (context, state) => const CustomerListScreen(),
    ),
    GoRoute(
      path: '/products',
      builder: (context, state) => const ProductListScreen(),
    ),
    // ... ë” ë§ì€ ë¼ìš°íŠ¸
  ],
);
```

---

## 6. í•µì‹¬ ê¸°ëŠ¥ êµ¬í˜„

### 6.1 ëª¨ë¸ ì •ì˜ (Freezed ì‚¬ìš©)

#### Customer ëª¨ë¸

```dart
import 'package:freezed_annotation/freezed_annotation.dart';

part 'customer.freezed.dart';
part 'customer.g.dart';

@freezed
class Customer with _$Customer {
  const factory Customer({
    required String id,
    required String businessId,
    required String name,
    String? phone,
    String? memo,
    @Default(true) bool isActive,
    required DateTime createdAt,
    required DateTime updatedAt,
    
    // ì¡°íšŒ ì‹œì—ë§Œ ì‚¬ìš© (DBì—ëŠ” ì—†ìŒ)
    @Default(0) double balance,
  }) = _Customer;
  
  factory Customer.fromJson(Map<String, dynamic> json) =>
      _$CustomerFromJson(json);
}
```

#### Product ëª¨ë¸

```dart
import 'package:freezed_annotation/freezed_annotation.dart';

part 'product.freezed.dart';
part 'product.g.dart';

@freezed
class Product with _$Product {
  const factory Product({
    required String id,
    required String businessId,
    required String name,
    String? code,
    String? category,
    double? defaultUnitPrice,
    @Default('ê°œ') String unit,
    String? description,
    @Default(true) bool isActive,
    required DateTime createdAt,
    required DateTime updatedAt,
  }) = _Product;
  
  factory Product.fromJson(Map<String, dynamic> json) => 
      _$ProductFromJson(json);
}
```

#### Transaction ëª¨ë¸

```dart
import 'package:freezed_annotation/freezed_annotation.dart';

part 'transaction.freezed.dart';
part 'transaction.g.dart';

enum TransactionType {
  @JsonValue('receivable')
  receivable,  // ë°›ì„ ëˆ
  
  @JsonValue('payable')
  payable,     // ì¤„ ëˆ
}

@freezed
class Transaction with _$Transaction {
  const factory Transaction({
    required String id,
    required String businessId,
    required String customerId,
    required TransactionType type,
    
    // í’ˆëª© ì •ë³´ (ì„ íƒì‚¬í•­)
    String? productId,
    double? quantity,
    double? unitPrice,
    
    required double amount,
    required DateTime date,
    String? memo,
    required DateTime createdAt,
    required DateTime updatedAt,
    
    // JOIN ë°ì´í„° (ì¡°íšŒ ì‹œì—ë§Œ)
    Customer? customer,
    Product? product,
  }) = _Transaction;
  
  factory Transaction.fromJson(Map<String, dynamic> json) =>
      _$TransactionFromJson(json);
}
```

### 6.2 Supabase ì„œë¹„ìŠ¤

```dart
import 'package:supabase_flutter/supabase_flutter.dart';

class SupabaseService {
  final SupabaseClient _client = Supabase.instance.client;
  
  // ì‹±ê¸€í†¤ íŒ¨í„´
  static final SupabaseService _instance = SupabaseService._internal();
  factory SupabaseService() => _instance;
  SupabaseService._internal();
  
  // ========== ì¸ì¦ ==========
  
  Future<AuthResponse> signUp(String email, String password) async {
    return await _client.auth.signUp(
      email: email,
      password: password,
    );
  }
  
  Future<AuthResponse> signIn(String email, String password) async {
    return await _client.auth.signInWithPassword(
      email: email,
      password: password,
    );
  }
  
  Future<void> signOut() async {
    await _client.auth.signOut();
  }
  
  // ========== ê±°ë˜ì²˜ ==========
  
  Future<List<Customer>> getCustomers(String businessId) async {
    final response = await _client
        .from('customers')
        .select()
        .eq('business_id', businessId)
        .eq('is_active', true)
        .order('name');
    
    return (response as List)
        .map((json) => Customer.fromJson(json))
        .toList();
  }
  
  Future<Customer> createCustomer(Customer customer) async {
    final response = await _client
        .from('customers')
        .insert(customer.toJson())
        .select()
        .single();
    
    return Customer.fromJson(response);
  }
  
  Future<void> updateCustomer(Customer customer) async {
    await _client
        .from('customers')
        .update(customer.toJson())
        .eq('id', customer.id);
  }
  
  Future<void> deleteCustomer(String customerId) async {
    await _client
        .from('customers')
        .update({'is_active': false})
        .eq('id', customerId);
  }
  
  // ========== í’ˆëª© ==========
  
  Future<List<Product>> getProducts(String businessId) async {
    final response = await _client
        .from('products')
        .select()
        .eq('business_id', businessId)
        .eq('is_active', true)
        .order('name');
    
    return (response as List)
        .map((json) => Product.fromJson(json))
        .toList();
  }
  
  Future<Product> createProduct(Product product) async {
    final response = await _client
        .from('products')
        .insert(product.toJson())
        .select()
        .single();
    
    return Product.fromJson(response);
  }
  
  Future<void> updateProduct(Product product) async {
    await _client
        .from('products')
        .update(product.toJson())
        .eq('id', product.id);
  }
  
  Future<void> deleteProduct(String productId) async {
    await _client
        .from('products')
        .update({'is_active': false})
        .eq('id', productId);
  }
  
  // ========== ê±°ë˜ ==========
  
  Future<List<Transaction>> getTransactions({
    required String customerId,
    DateTime? startDate,
    DateTime? endDate,
  }) async {
    var query = _client
        .from('transactions')
        .select('*, customer:customers(*), product:products(*)')
        .eq('customer_id', customerId)
        .order('date', ascending: false);
    
    if (startDate != null) {
      query = query.gte('date', startDate.toIso8601String());
    }
    if (endDate != null) {
      query = query.lte('date', endDate.toIso8601String());
    }
    
    final response = await query;
    
    return (response as List)
        .map((json) => Transaction.fromJson(json))
        .toList();
  }
  
  Future<Transaction> getTransaction(String transactionId) async {
    final response = await _client
        .from('transactions')
        .select('*, customer:customers(*), product:products(*)')
        .eq('id', transactionId)
        .single();
    
    return Transaction.fromJson(response);
  }
  
  Future<Transaction> createTransaction(Transaction transaction) async {
    final response = await _client
        .from('transactions')
        .insert(transaction.toJson())
        .select()
        .single();
    
    return Transaction.fromJson(response);
  }
  
  Future<void> updateTransaction(Transaction transaction) async {
    await _client
        .from('transactions')
        .update(transaction.toJson())
        .eq('id', transaction.id);
  }
  
  Future<void> deleteTransaction(String transactionId) async {
    await _client
        .from('transactions')
        .delete()
        .eq('id', transactionId);
  }
  
  // ========== ì”ì•¡ ==========
  
  Future<double> getCustomerBalance(String customerId) async {
    final response = await _client.rpc(
      'get_customer_balance',
      params: {'p_customer_id': customerId},
    );
    
    return (response as num).toDouble();
  }
}
```

---

## 7. ì¹´ì¹´ì˜¤í†¡ ê³µìœ  ê¸°ëŠ¥

### 7.1 ê³µìœ  ì„œë¹„ìŠ¤ êµ¬í˜„

```dart
import 'dart:io';
import 'package:flutter/material.dart';
import 'package:screenshot/screenshot.dart';
import 'package:share_plus/share_plus.dart';
import 'package:path_provider/path_provider.dart';
import 'package:intl/intl.dart';

class ShareService {
  final ScreenshotController _screenshotController = ScreenshotController();
  
  /// ê±°ë˜ ë‚´ì—­ì„ ì´ë¯¸ì§€ë¡œ ê³µìœ 
  Future<void> shareTransactionReceipt({
    required String businessName,
    required String businessPhone,
    required String customerName,
    required List<Transaction> transactions,
    required double balance,
  }) async {
    try {
      // 1. ì˜ìˆ˜ì¦ ìœ„ì ¯ ìƒì„±
      final receiptWidget = _buildReceiptWidget(
        businessName: businessName,
        businessPhone: businessPhone,
        customerName: customerName,
        transactions: transactions,
        balance: balance,
      );
      
      // 2. ìœ„ì ¯ì„ ì´ë¯¸ì§€ë¡œ ìº¡ì²˜
      final imageBytes = await _screenshotController.captureFromWidget(
        receiptWidget,
        pixelRatio: 3.0,  // ê³ í•´ìƒë„
        context: null,
      );
      
      // 3. ì„ì‹œ íŒŒì¼ë¡œ ì €ì¥
      final tempDir = await getTemporaryDirectory();
      final timestamp = DateTime.now().millisecondsSinceEpoch;
      final file = File('${tempDir.path}/receipt_$timestamp.png');
      await file.writeAsBytes(imageBytes);
      
      // 4. ê³µìœ  ì‹œíŠ¸ ì—´ê¸°
      await Share.shareXFiles(
        [XFile(file.path)],
        text: '[$businessName] ê±°ë˜ ëª…ì„¸ì„œ\nê±°ë˜ì²˜: $customerName',
        subject: 'ê±°ë˜ ëª…ì„¸ì„œ',
      );
      
    } catch (e) {
      print('ê³µìœ  ì‹¤íŒ¨: $e');
      rethrow;
    }
  }
  
  /// ì˜ìˆ˜ì¦ ìœ„ì ¯ ìƒì„±
  Widget _buildReceiptWidget({
    required String businessName,
    required String businessPhone,
    required String customerName,
    required List<Transaction> transactions,
    required double balance,
  }) {
    return Container(
      width: 400,
      padding: const EdgeInsets.all(24),
      color: Colors.white,
      child: Column(
        mainAxisSize: MainAxisSize.min,
        children: [
          // í—¤ë”
          const Text(
            'ğŸ’¼ ê±°ë˜ ëª…ì„¸ì„œ',
            style: TextStyle(
              fontSize: 24,
              fontWeight: FontWeight.bold,
              color: Colors.black87,
            ),
          ),
          const SizedBox(height: 16),
          
          // ì‚¬ì—…ì¥ ì •ë³´
          Text(
            businessName,
            style: const TextStyle(
              fontSize: 18,
              fontWeight: FontWeight.w600,
              color: Colors.black87,
            ),
          ),
          Text(
            'ğŸ“ $businessPhone',
            style: const TextStyle(
              fontSize: 14,
              color: Colors.black54,
            ),
          ),
          const SizedBox(height: 16),
          
          // ê±°ë˜ì²˜ ì •ë³´
          Container(
            padding: const EdgeInsets.all(12),
            decoration: BoxDecoration(
              color: const Color(0xFFE3F2FD),
              borderRadius: BorderRadius.circular(8),
            ),
            child: Row(
              mainAxisAlignment: MainAxisAlignment.spaceBetween,
              children: [
                const Text(
                  'ê±°ë˜ì²˜:',
                  style: TextStyle(
                    fontWeight: FontWeight.w600,
                    color: Colors.black87,
                  ),
                ),
                Text(
                  customerName,
                  style: const TextStyle(
                    fontSize: 16,
                    color: Colors.black87,
                  ),
                ),
              ],
            ),
          ),
          const SizedBox(height: 8),
          
          // ë‚ ì§œ
          Text(
            'ğŸ“… ${DateFormat('yyyyë…„ MMì›”').format(DateTime.now())}',
            style: TextStyle(
              color: Colors.grey.shade600,
            ),
          ),
          const SizedBox(height: 16),
          
          // êµ¬ë¶„ì„ 
          const Divider(thickness: 2, color: Colors.black54),
          
          // ê±°ë˜ ë‚´ì—­
          ...transactions.map((tx) => Padding(
            padding: const EdgeInsets.symmetric(vertical: 8),
            child: Row(
              mainAxisAlignment: MainAxisAlignment.spaceBetween,
              children: [
                Column(
                  crossAxisAlignment: CrossAxisAlignment.start,
                  children: [
                    Text(
                      DateFormat('MM/dd').format(tx.date),
                      style: const TextStyle(
                        fontSize: 12,
                        color: Colors.grey,
                      ),
                    ),
                    Row(
                      children: [
                        Text(
                          tx.type == TransactionType.receivable 
                              ? 'ğŸ’° ë°›ì„ ëˆ' 
                              : 'ğŸ’¸ ì¤€ ëˆ',
                          style: const TextStyle(fontSize: 14),
                        ),
                        if (tx.product != null) ...[
                          const SizedBox(width: 8),
                          Text(
                            '(${tx.product!.name})',
                            style: const TextStyle(
                              fontSize: 12,
                              color: Colors.grey,
                            ),
                          ),
                        ],
                      ],
                    ),
                  ],
                ),
                Text(
                  '${tx.type == TransactionType.receivable ? '+' : '-'}'
                  '${_formatAmount(tx.amount)}ì›',
                  style: TextStyle(
                    fontSize: 16,
                    fontWeight: FontWeight.w600,
                    color: tx.type == TransactionType.receivable
                        ? const Color(0xFF388E3C)
                        : const Color(0xFFD32F2F),
                  ),
                ),
              ],
            ),
          )),
          
          // êµ¬ë¶„ì„ 
          const Divider(thickness: 2, color: Colors.black54),
          const SizedBox(height: 8),
          
          // ì”ì•¡
          Container(
            padding: const EdgeInsets.all(16),
            decoration: BoxDecoration(
              color: balance >= 0 
                  ? const Color(0xFFE8F5E9)
                  : const Color(0xFFFFEBEE),
              borderRadius: BorderRadius.circular(8),
              border: Border.all(
                color: balance >= 0
                    ? const Color(0xFFA5D6A7)
                    : const Color(0xFFEF9A9A),
                width: 2,
              ),
            ),
            child: Column(
              children: [
                const Text(
                  'ğŸ“Š í˜„ì¬ ì”ì•¡',
                  style: TextStyle(
                    fontSize: 14,
                    color: Colors.black54,
                  ),
                ),
                const SizedBox(height: 4),
                Text(
                  '${_formatAmount(balance.abs())}ì›',
                  style: TextStyle(
                    fontSize: 28,
                    fontWeight: FontWeight.bold,
                    color: balance >= 0
                        ? const Color(0xFF388E3C)
                        : const Color(0xFFD32F2F),
                  ),
                ),
                Text(
                  balance >= 0 ? '(ë°›ì„ ëˆ)' : '(ì¤„ ëˆ)',
                  style: const TextStyle(
                    fontSize: 12,
                    color: Colors.black54,
                  ),
                ),
              ],
            ),
          ),
          
          const SizedBox(height: 16),
          
          // í‘¸í„°
          Text(
            '${DateFormat('yyyy-MM-dd').format(DateTime.now())} ë°œí–‰',
            style: TextStyle(
              fontSize: 12,
              color: Colors.grey.shade500,
            ),
          ),
        ],
      ),
    );
  }
  
  /// ê¸ˆì•¡ í¬ë§· (ì²œ ë‹¨ìœ„ ì‰¼í‘œ)
  String _formatAmount(double amount) {
    return NumberFormat('#,###').format(amount.round());
  }
}
```

---

## 8. ìƒíƒœ ê´€ë¦¬

### 8.1 Provider ì •ì˜

```dart
import 'package:flutter_riverpod/flutter_riverpod.dart';

// Supabase ì„œë¹„ìŠ¤ Provider
final supabaseServiceProvider = Provider((ref) => SupabaseService());

// í˜„ì¬ ì‚¬ìš©ì Provider
final currentUserProvider = StreamProvider((ref) {
  final service = ref.watch(supabaseServiceProvider);
  return service.authStateChanges;
});

// í˜„ì¬ ì‚¬ì—…ì¥ Provider
final currentBusinessProvider = FutureProvider<Business>((ref) async {
  final service = ref.watch(supabaseServiceProvider);
  final user = ref.watch(currentUserProvider).value;
  
  if (user == null) throw Exception('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤');
  
  return await service.getBusiness(user.id);
});

// ========== ê±°ë˜ì²˜ ==========

final customersProvider = FutureProvider<List<Customer>>((ref) async {
  final service = ref.watch(supabaseServiceProvider);
  final business = await ref.watch(currentBusinessProvider.future);
  
  return await service.getCustomers(business.id);
});

final customerProvider = FutureProvider.family<Customer, String>(
  (ref, customerId) async {
    final service = ref.watch(supabaseServiceProvider);
    final customer = await service.getCustomer(customerId);
    
    // ì”ì•¡ ì¡°íšŒ
    final balance = await service.getCustomerBalance(customerId);
    
    return customer.copyWith(balance: balance);
  },
);

// ========== í’ˆëª© ==========

final productsProvider = FutureProvider<List<Product>>((ref) async {
  final service = ref.watch(supabaseServiceProvider);
  final business = await ref.watch(currentBusinessProvider.future);
  
  return await service.getProducts(business.id);
});

final productProvider = FutureProvider.family<Product, String>(
  (ref, productId) async {
    final service = ref.watch(supabaseServiceProvider);
    return await service.getProduct(productId);
  },
);

// ========== ê±°ë˜ ==========

final transactionsProvider = FutureProvider.family<List<Transaction>, String>(
  (ref, customerId) async {
    final service = ref.watch(supabaseServiceProvider);
    return await service.getTransactions(customerId: customerId);
  },
);

final transactionProvider = FutureProvider.family<Transaction, String>(
  (ref, transactionId) async {
    final service = ref.watch(supabaseServiceProvider);
    return await service.getTransaction(transactionId);
  },
);
```

---

## 9. í™”ë©´ë³„ êµ¬í˜„ ê°€ì´ë“œ

### 9.1 ë¡œê·¸ì¸ í™”ë©´

```dart
class LoginScreen extends ConsumerStatefulWidget {
  const LoginScreen({super.key});

  @override
  ConsumerState<LoginScreen> createState() => _LoginScreenState();
}

class _LoginScreenState extends ConsumerState<LoginScreen> {
  final _emailController = TextEditingController();
  final _passwordController = TextEditingController();
  final _formKey = GlobalKey<FormState>();
  
  bool _isLoading = false;
  
  @override
  void dispose() {
    _emailController.dispose();
    _passwordController.dispose();
    super.dispose();
  }
  
  Future<void> _signIn() async {
    if (!_formKey.currentState!.validate()) return;
    
    setState(() => _isLoading = true);
    
    try {
      final service = ref.read(supabaseServiceProvider);
      await service.signIn(
        _emailController.text.trim(),
        _passwordController.text,
      );
      
      if (mounted) {
        context.go('/customers');
      }
    } catch (e) {
      if (mounted) {
        ScaffoldMessenger.of(context).showSnackBar(
          SnackBar(content: Text('ë¡œê·¸ì¸ ì‹¤íŒ¨: $e')),
        );
      }
    } finally {
      if (mounted) {
        setState(() => _isLoading = false);
      }
    }
  }
  
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      body: SafeArea(
        child: Padding(
          padding: const EdgeInsets.all(24),
          child: Form(
            key: _formKey,
            child: Column(
              mainAxisAlignment: MainAxisAlignment.center,
              children: [
                // ë¡œê³ 
                const Icon(
                  Icons.account_balance_wallet,
                  size: 80,
                  color: Colors.blue,
                ),
                const SizedBox(height: 16),
                const Text(
                  'ê±°ë˜ì˜ì¥ì¸',
                  style: TextStyle(
                    fontSize: 32,
                    fontWeight: FontWeight.bold,
                  ),
                ),
                const SizedBox(height: 48),
                
                // ì´ë©”ì¼ ì…ë ¥
                TextFormField(
                  controller: _emailController,
                  decoration: const InputDecoration(
                    labelText: 'ì´ë©”ì¼',
                    border: OutlineInputBorder(),
                    prefixIcon: Icon(Icons.email),
                  ),
                  keyboardType: TextInputType.emailAddress,
                  validator: (value) {
                    if (value == null || value.isEmpty) {
                      return 'ì´ë©”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”';
                    }
                    if (!value.contains('@')) {
                      return 'ì˜¬ë°”ë¥¸ ì´ë©”ì¼ì„ ì…ë ¥í•˜ì„¸ìš”';
                    }
                    return null;
                  },
                ),
                const SizedBox(height: 16),
                
                // ë¹„ë°€ë²ˆí˜¸ ì…ë ¥
                TextFormField(
                  controller: _passwordController,
                  decoration: const InputDecoration(
                    labelText: 'ë¹„ë°€ë²ˆí˜¸',
                    border: OutlineInputBorder(),
                    prefixIcon: Icon(Icons.lock),
                  ),
                  obscureText: true,
                  validator: (value) {
                    if (value == null || value.isEmpty) {
                      return 'ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”';
                    }
                    if (value.length < 6) {
                      return 'ë¹„ë°€ë²ˆí˜¸ëŠ” 6ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤';
                    }
                    return null;
                  },
                ),
                const SizedBox(height: 24),
                
                // ë¡œê·¸ì¸ ë²„íŠ¼
                SizedBox(
                  width: double.infinity,
                  height: 50,
                  child: ElevatedButton(
                    onPressed: _isLoading ? null : _signIn,
                    child: _isLoading
                        ? const CircularProgressIndicator(color: Colors.white)
                        : const Text('ë¡œê·¸ì¸', style: TextStyle(fontSize: 18)),
                  ),
                ),
                const SizedBox(height: 16),
                
                // íšŒì›ê°€ì… ë²„íŠ¼
                TextButton(
                  onPressed: () => context.go('/signup'),
                  child: const Text('ê³„ì •ì´ ì—†ìœ¼ì‹ ê°€ìš”? íšŒì›ê°€ì…'),
                ),
              ],
            ),
          ),
        ),
      ),
    );
  }
}
```

### 9.2 ê±°ë˜ì²˜ ëª©ë¡ í™”ë©´

```dart
class CustomerListScreen extends ConsumerWidget {
  const CustomerListScreen({super.key});

  @override
  Widget build(BuildContext context, WidgetRef ref) {
    final customersAsync = ref.watch(customersProvider);
    
    return Scaffold(
      appBar: AppBar(
        title: const Text('ë‚´ ê±°ë˜ì²˜'),
        actions: [
          IconButton(
            icon: const Icon(Icons.inventory_2),
            onPressed: () => context.go('/products'),
          ),
          IconButton(
            icon: const Icon(Icons.settings),
            onPressed: () => context.go('/settings'),
          ),
        ],
      ),
      body: customersAsync.when(
        data: (customers) {
          if (customers.isEmpty) {
            return Center(
              child: Column(
                mainAxisAlignment: MainAxisAlignment.center,
                children: [
                  const Icon(
                    Icons.people_outline,
                    size: 80,
                    color: Colors.grey,
                  ),
                  const SizedBox(height: 16),
                  const Text(
                    'ë“±ë¡ëœ ê±°ë˜ì²˜ê°€ ì—†ìŠµë‹ˆë‹¤',
                    style: TextStyle(fontSize: 18, color: Colors.grey),
                  ),
                  const SizedBox(height: 24),
                  ElevatedButton.icon(
                    onPressed: () => context.go('/customers/new'),
                    icon: const Icon(Icons.add),
                    label: const Text('ê±°ë˜ì²˜ ì¶”ê°€í•˜ê¸°'),
                  ),
                ],
              ),
            );
          }
          
          return ListView.builder(
            itemCount: customers.length,
            itemBuilder: (context, index) {
              final customer = customers[index];
              return CustomerListItem(
                customer: customer,
                onTap: () => context.go('/customers/${customer.id}'),
              );
            },
          );
        },
        loading: () => const Center(child: CircularProgressIndicator()),
        error: (err, stack) => Center(
          child: Text('ì—ëŸ¬ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: $err'),
        ),
      ),
      floatingActionButton: FloatingActionButton.extended(
        onPressed: () => context.go('/customers/new'),
        icon: const Icon(Icons.add),
        label: const Text('ê±°ë˜ì²˜ ì¶”ê°€'),
      ),
    );
  }
}
```

### 9.3 í’ˆëª© ëª©ë¡ í™”ë©´

```dart
class ProductListScreen extends ConsumerWidget {
  const ProductListScreen({super.key});

  @override
  Widget build(BuildContext context, WidgetRef ref) {
    final productsAsync = ref.watch(productsProvider);
    
    return Scaffold(
      appBar: AppBar(
        title: const Text('í’ˆëª© ê´€ë¦¬'),
      ),
      body: productsAsync.when(
        data: (products) {
          if (products.isEmpty) {
            return Center(
              child: Column(
                mainAxisAlignment: MainAxisAlignment.center,
                children: [
                  const Icon(Icons.inventory_2, size: 80, color: Colors.grey),
                  const SizedBox(height: 16),
                  const Text('ë“±ë¡ëœ í’ˆëª©ì´ ì—†ìŠµë‹ˆë‹¤'),
                  const SizedBox(height: 24),
                  ElevatedButton.icon(
                    onPressed: () => context.go('/products/new'),
                    icon: const Icon(Icons.add),
                    label: const Text('í’ˆëª© ì¶”ê°€í•˜ê¸°'),
                  ),
                ],
              ),
            );
          }
          
          // ì¹´í…Œê³ ë¦¬ë³„ë¡œ ê·¸ë£¹í™”
          final groupedProducts = <String, List<Product>>{};
          for (final product in products) {
            final category = product.category ?? 'ë¯¸ë¶„ë¥˜';
            groupedProducts.putIfAbsent(category, () => []).add(product);
          }
          
          return ListView(
            children: groupedProducts.entries.map((entry) {
              return Column(
                crossAxisAlignment: CrossAxisAlignment.start,
                children: [
                  Padding(
                    padding: const EdgeInsets.all(16),
                    child: Text(
                      entry.key,
                      style: const TextStyle(
                        fontSize: 18,
                        fontWeight: FontWeight.bold,
                        color: Colors.blue,
                      ),
                    ),
                  ),
                  ...entry.value.map((product) => ListTile(
                    leading: const Icon(Icons.inventory_2),
                    title: Text(product.name),
                    subtitle: Text(
                      '${NumberFormat('#,###').format(product.defaultUnitPrice ?? 0)}ì›/${product.unit}',
                    ),
                    trailing: const Icon(Icons.chevron_right),
                    onTap: () => context.go('/products/${product.id}'),
                  )),
                  const Divider(),
                ],
              );
            }).toList(),
          );
        },
        loading: () => const Center(child: CircularProgressIndicator()),
        error: (err, _) => Center(child: Text('ì—ëŸ¬: $err')),
      ),
      floatingActionButton: FloatingActionButton.extended(
        onPressed: () => context.go('/products/new'),
        icon: const Icon(Icons.add),
        label: const Text('í’ˆëª© ì¶”ê°€'),
      ),
    );
  }
}
```

### 9.4 ê±°ë˜ ì…ë ¥ í™”ë©´ (í’ˆëª© ì„ íƒ í¬í•¨)

```dart
class TransactionFormScreen extends ConsumerStatefulWidget {
  final String customerId;
  
  const TransactionFormScreen({
    super.key,
    required this.customerId,
  });

  @override
  ConsumerState<TransactionFormScreen> createState() => 
      _TransactionFormScreenState();
}

class _TransactionFormScreenState extends ConsumerState<TransactionFormScreen> {
  final _formKey = GlobalKey<FormState>();
  final _amountController = TextEditingController();
  final _quantityController = TextEditingController();
  final _unitPriceController = TextEditingController();
  final _memoController = TextEditingController();
  
  TransactionType _type = TransactionType.receivable;
  DateTime _date = DateTime.now();
  Product? _selectedProduct;
  bool _useProduct = false;
  bool _isLoading = false;
  
  @override
  void dispose() {
    _amountController.dispose();
    _quantityController.dispose();
    _unitPriceController.dispose();
    _memoController.dispose();
    super.dispose();
  }
  
  @override
  Widget build(BuildContext context) {
    final productsAsync = ref.watch(productsProvider);
    
    return Scaffold(
      appBar: AppBar(title: const Text('ê±°ë˜ ì…ë ¥')),
      body: Form(
        key: _formKey,
        child: ListView(
          padding: const EdgeInsets.all(16),
          children: [
            // ê±°ë˜ ìœ í˜• ì„ íƒ
            const Text(
              'ê±°ë˜ ìœ í˜•',
              style: TextStyle(fontSize: 16, fontWeight: FontWeight.bold),
            ),
            const SizedBox(height: 8),
            SegmentedButton<TransactionType>(
              segments: const [
                ButtonSegment(
                  value: TransactionType.receivable,
                  label: Text('ğŸ’° ë°›ì„ ëˆ'),
                ),
                ButtonSegment(
                  value: TransactionType.payable,
                  label: Text('ğŸ’¸ ì¤„ ëˆ'),
                ),
              ],
              selected: {_type},
              onSelectionChanged: (Set<TransactionType> newSelection) {
                setState(() {
                  _type = newSelection.first;
                });
              },
            ),
            const SizedBox(height: 24),
            
            // í’ˆëª© ì‚¬ìš© ì—¬ë¶€
            SwitchListTile(
              title: const Text('í’ˆëª©ìœ¼ë¡œ ì…ë ¥í•˜ê¸°'),
              subtitle: const Text('í’ˆëª©, ìˆ˜ëŸ‰, ë‹¨ê°€ë¥¼ ì…ë ¥í•©ë‹ˆë‹¤'),
              value: _useProduct,
              onChanged: (value) {
                setState(() {
                  _useProduct = value;
                  if (!value) {
                    _selectedProduct = null;
                    _quantityController.clear();
                    _unitPriceController.clear();
                  }
                });
              },
            ),
            const SizedBox(height: 16),
            
            // í’ˆëª© ì„ íƒ UI
            if (_useProduct) ...[
              productsAsync.when(
                data: (products) => DropdownButtonFormField<Product>(
                  decoration: const InputDecoration(
                    labelText: 'í’ˆëª©',
                    border: OutlineInputBorder(),
                    prefixIcon: Icon(Icons.inventory_2),
                  ),
                  value: _selectedProduct,
                  items: products.map((product) {
                    return DropdownMenuItem(
                      value: product,
                      child: Text('${product.name} (${product.unit})'),
                    );
                  }).toList(),
                  onChanged: (product) {
                    setState(() {
                      _selectedProduct = product;
                      if (product?.defaultUnitPrice != null) {
                        _unitPriceController.text = 
                            product!.defaultUnitPrice.toString();
                        _calculateAmount();
                      }
                    });
                  },
                  validator: (value) {
                    if (_useProduct && value == null) {
                      return 'í’ˆëª©ì„ ì„ íƒí•˜ì„¸ìš”';
                    }
                    return null;
                  },
                ),
                loading: () => const CircularProgressIndicator(),
                error: (err, _) => Text('í’ˆëª© ë¡œë“œ ì‹¤íŒ¨: $err'),
              ),
              const SizedBox(height: 16),
              
              // ìˆ˜ëŸ‰, ë‹¨ê°€ ì…ë ¥
              Row(
                children: [
                  Expanded(
                    child: TextFormField(
                      controller: _quantityController,
                      decoration: InputDecoration(
                        labelText: 'ìˆ˜ëŸ‰',
                        border: const OutlineInputBorder(),
                        suffixText: _selectedProduct?.unit ?? '',
                      ),
                      keyboardType: TextInputType.number,
                      onChanged: (_) => _calculateAmount(),
                      validator: (value) {
                        if (_useProduct && (value == null || value.isEmpty)) {
                          return 'ìˆ˜ëŸ‰ì„ ì…ë ¥í•˜ì„¸ìš”';
                        }
                        return null;
                      },
                    ),
                  ),
                  const SizedBox(width: 16),
                  Expanded(
                    child: TextFormField(
                      controller: _unitPriceController,
                      decoration: const InputDecoration(
                        labelText: 'ë‹¨ê°€',
                        border: OutlineInputBorder(),
                        suffixText: 'ì›',
                      ),
                      keyboardType: TextInputType.number,
                      onChanged: (_) => _calculateAmount(),
                      validator: (value) {
                        if (_useProduct && (value == null || value.isEmpty)) {
                          return 'ë‹¨ê°€ë¥¼ ì…ë ¥í•˜ì„¸ìš”';
                        }
                        return null;
                      },
                    ),
                  ),
                ],
              ),
              const SizedBox(height: 16),
              
              // ìë™ ê³„ì‚°ëœ ê¸ˆì•¡
              Container(
                padding: const EdgeInsets.all(16),
                decoration: BoxDecoration(
                  color: Colors.blue.shade50,
                  borderRadius: BorderRadius.circular(8),
                  border: Border.all(color: Colors.blue.shade200),
                ),
                child: Row(
                  mainAxisAlignment: MainAxisAlignment.spaceBetween,
                  children: [
                    const Text(
                      'í•©ê³„',
                      style: TextStyle(
                        fontSize: 16,
                        fontWeight: FontWeight.bold,
                      ),
                    ),
                    Text(
                      '${_amountController.text}ì›',
                      style: const TextStyle(
                        fontSize: 20,
                        fontWeight: FontWeight.bold,
                        color: Colors.blue,
                      ),
                    ),
                  ],
                ),
              ),
            ] else ...[
              // ê¸ˆì•¡ ì§ì ‘ ì…ë ¥
              TextFormField(
                controller: _amountController,
                decoration: const InputDecoration(
                  labelText: 'ê¸ˆì•¡',
                  border: OutlineInputBorder(),
                  suffixText: 'ì›',
                  prefixIcon: Icon(Icons.attach_money),
                ),
                keyboardType: TextInputType.number,
                validator: (value) {
                  if (!_useProduct && (value == null || value.isEmpty)) {
                    return 'ê¸ˆì•¡ì„ ì…ë ¥í•˜ì„¸ìš”';
                  }
                  return null;
                },
                onChanged: (value) {
                  // ì²œ ë‹¨ìœ„ ì‰¼í‘œ ìë™ ì¶”ê°€
                  final number = value.replaceAll(',', '');
                  if (number.isNotEmpty) {
                    final formatted = NumberFormat('#,###').format(
                      int.tryParse(number) ?? 0,
                    );
                    _amountController.value = TextEditingValue(
                      text: formatted,
                      selection: TextSelection.collapsed(
                        offset: formatted.length,
                      ),
                    );
                  }
                },
              ),
            ],
            const SizedBox(height: 16),
            
            // ë‚ ì§œ ì„ íƒ
            ListTile(
              contentPadding: EdgeInsets.zero,
              leading: const Icon(Icons.calendar_today),
              title: const Text('ê±°ë˜ ë‚ ì§œ'),
              subtitle: Text(DateFormat('yyyy-MM-dd').format(_date)),
              trailing: const Icon(Icons.chevron_right),
              onTap: () async {
                final picked = await showDatePicker(
                  context: context,
                  initialDate: _date,
                  firstDate: DateTime(2020),
                  lastDate: DateTime.now(),
                );
                if (picked != null) {
                  setState(() {
                    _date = picked;
                  });
                }
              },
            ),
            const SizedBox(height: 16),
            
            // ë©”ëª¨
            TextFormField(
              controller: _memoController,
              decoration: const InputDecoration(
                labelText: 'ë©”ëª¨ (ì„ íƒì‚¬í•­)',
                border: OutlineInputBorder(),
                prefixIcon: Icon(Icons.note),
              ),
              maxLines: 3,
            ),
            const SizedBox(height: 32),
            
            // ì €ì¥ ë²„íŠ¼
            SizedBox(
              height: 50,
              child: ElevatedButton(
                onPressed: _isLoading ? null : _saveTransaction,
                child: _isLoading
                    ? const CircularProgressIndicator(color: Colors.white)
                    : const Text('ì €ì¥', style: TextStyle(fontSize: 18)),
              ),
            ),
          ],
        ),
      ),
    );
  }
  
  void _calculateAmount() {
    final quantity = double.tryParse(_quantityController.text) ?? 0;
    final unitPrice = double.tryParse(_unitPriceController.text) ?? 0;
    final amount = quantity * unitPrice;
    
    _amountController.text = NumberFormat('#,###').format(amount.round());
  }
  
  Future<void> _saveTransaction() async {
    if (!_formKey.currentState!.validate()) return;
    
    setState(() => _isLoading = true);
    
    try {
      final service = ref.read(supabaseServiceProvider);
      final business = await ref.read(currentBusinessProvider.future);
      
      final transaction = Transaction(
        id: '',
        businessId: business.id,
        customerId: widget.customerId,
        type: _type,
        productId: _useProduct ? _selectedProduct?.id : null,
        quantity: _useProduct 
            ? double.tryParse(_quantityController.text) 
            : null,
        unitPrice: _useProduct 
            ? double.tryParse(_unitPriceController.text) 
            : null,
        amount: double.parse(_amountController.text.replaceAll(',', '')),
        date: _date,
        memo: _memoController.text.isEmpty ? null : _memoController.text,
        createdAt: DateTime.now(),
        updatedAt: DateTime.now(),
      );
      
      await service.createTransaction(transaction);
      
      // Provider ê°±ì‹ 
      ref.invalidate(transactionsProvider(widget.customerId));
      ref.invalidate(customerProvider(widget.customerId));
      
      if (mounted) {
        context.pop();
        ScaffoldMessenger.of(context).showSnackBar(
          const SnackBar(content: Text('ê±°ë˜ê°€ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤')),
        );
      }
    } catch (e) {
      if (mounted) {
        ScaffoldMessenger.of(context).showSnackBar(
          SnackBar(content: Text('ì €ì¥ ì‹¤íŒ¨: $e')),
        );
      }
    } finally {
      if (mounted) {
        setState(() => _isLoading = false);
      }
    }
  }
}
```

### 9.5 ê±°ë˜ ìƒì„¸/ìˆ˜ì •/ì‚­ì œ

**ê±°ë˜ ìƒì„¸ í™”ë©´:**

```dart
class TransactionDetailScreen extends ConsumerWidget {
  final String transactionId;
  
  const TransactionDetailScreen({
    super.key,
    required this.transactionId,
  });

  @override
  Widget build(BuildContext context, WidgetRef ref) {
    final transactionAsync = ref.watch(transactionProvider(transactionId));
    
    return Scaffold(
      appBar: AppBar(
        title: const Text('ê±°ë˜ ìƒì„¸'),
        actions: [
          IconButton(
            icon: const Icon(Icons.edit),
            onPressed: () {
              context.go('/transactions/$transactionId/edit');
            },
          ),
          IconButton(
            icon: const Icon(Icons.delete),
            onPressed: () => _showDeleteDialog(context, ref),
          ),
        ],
      ),
      body: transactionAsync.when(
        data: (transaction) => ListView(
          padding: const EdgeInsets.all(16),
          children: [
            // ê±°ë˜ ì •ë³´ ì¹´ë“œ
            Card(
              child: Padding(
                padding: const EdgeInsets.all(16),
                child: Column(
                  crossAxisAlignment: CrossAxisAlignment.start,
                  children: [
                    // ê±°ë˜ì²˜
                    _buildInfoRow(
                      Icons.business,
                      'ê±°ë˜ì²˜',
                      transaction.customer?.name ?? 'ì•Œ ìˆ˜ ì—†ìŒ',
                    ),
                    const Divider(height: 24),
                    
                    // ê±°ë˜ ìœ í˜•
                    _buildInfoRow(
                      transaction.type == TransactionType.receivable
                          ? Icons.arrow_downward
                          : Icons.arrow_upward,
                      'ê±°ë˜ ìœ í˜•',
                      transaction.type == TransactionType.receivable
                          ? 'ğŸ’° ë°›ì„ ëˆ'
                          : 'ğŸ’¸ ì¤„ ëˆ',
                      valueColor: transaction.type == TransactionType.receivable
                          ? Colors.green
                          : Colors.red,
                    ),
                    
                    // í’ˆëª© ì •ë³´ (ìˆì„ ê²½ìš°)
                    if (transaction.product != null) ...[
                      const Divider(height: 24),
                      _buildInfoRow(
                        Icons.inventory_2,
                        'í’ˆëª©',
                        transaction.product!.name,
                      ),
                      const SizedBox(height: 12),
                      Padding(
                        padding: const EdgeInsets.only(left: 28),
                        child: Column(
                          children: [
                            _buildSubInfoRow(
                              'ìˆ˜ëŸ‰',
                              '${transaction.quantity} ${transaction.product!.unit}',
                            ),
                            const SizedBox(height: 8),
                            _buildSubInfoRow(
                              'ë‹¨ê°€',
                              '${NumberFormat('#,###').format(transaction.unitPrice)}ì›',
                            ),
                          ],
                        ),
                      ),
                    ],
                    
                    const Divider(height: 24),
                    
                    // ê¸ˆì•¡
                    _buildInfoRow(
                      Icons.attach_money,
                      'ê¸ˆì•¡',
                      '${NumberFormat('#,###').format(transaction.amount)}ì›',
                      valueFontSize: 20,
                      valueBold: true,
                    ),
                    const Divider(height: 24),
                    
                    // ë‚ ì§œ
                    _buildInfoRow(
                      Icons.calendar_today,
                      'ê±°ë˜ ë‚ ì§œ',
                      DateFormat('yyyy-MM-dd').format(transaction.date),
                    ),
                    
                    // ë©”ëª¨ (ìˆì„ ê²½ìš°)
                    if (transaction.memo != null) ...[
                      const Divider(height: 24),
                      _buildInfoRow(
                        Icons.note,
                        'ë©”ëª¨',
                        transaction.memo!,
                        multiline: true,
                      ),
                    ],
                  ],
                ),
              ),
            ),
            
            const SizedBox(height: 24),
            
            // ìˆ˜ì • ë²„íŠ¼
            SizedBox(
              height: 50,
              child: ElevatedButton.icon(
                onPressed: () {
                  context.go('/transactions/$transactionId/edit');
                },
                icon: const Icon(Icons.edit),
                label: const Text('ìˆ˜ì •', style: TextStyle(fontSize: 18)),
              ),
            ),
            
            const SizedBox(height: 12),
            
            // ì‚­ì œ ë²„íŠ¼
            SizedBox(
              height: 50,
              child: OutlinedButton.icon(
                onPressed: () => _showDeleteDialog(context, ref),
                icon: const Icon(Icons.delete, color: Colors.red),
                label: const Text(
                  'ì‚­ì œ',
                  style: TextStyle(fontSize: 18, color: Colors.red),
                ),
                style: OutlinedButton.styleFrom(
                  side: const BorderSide(color: Colors.red),
                ),
              ),
            ),
          ],
        ),
        loading: () => const Center(child: CircularProgressIndicator()),
        error: (err, _) => Center(child: Text('ì—ëŸ¬: $err')),
      ),
    );
  }
  
  Widget _buildInfoRow(
    IconData icon,
    String label,
    String value, {
    Color? valueColor,
    double? valueFontSize,
    bool? valueBold,
    bool multiline = false,
  }) {
    return Row(
      crossAxisAlignment: multiline 
          ? CrossAxisAlignment.start 
          : CrossAxisAlignment.center,
      children: [
        Icon(icon, size: 20),
        const SizedBox(width: 8),
        Text(label, style: const TextStyle(color: Colors.grey)),
        if (!multiline) const Spacer(),
        if (!multiline) const SizedBox(width: 16),
        Expanded(
          child: Text(
            value,
            style: TextStyle(
              fontSize: valueFontSize ?? 16,
              fontWeight: valueBold == true 
                  ? FontWeight.bold 
                  : FontWeight.normal,
              color: valueColor,
            ),
            textAlign: multiline ? TextAlign.start : TextAlign.end,
          ),
        ),
      ],
    );
  }
  
  Widget _buildSubInfoRow(String label, String value) {
    return Row(
      mainAxisAlignment: MainAxisAlignment.spaceBetween,
      children: [
        Text(label, style: const TextStyle(color: Colors.grey)),
        Text(value, style: const TextStyle(fontSize: 16)),
      ],
    );
  }
  
  Future<void> _showDeleteDialog(BuildContext context, WidgetRef ref) async {
    final confirmed = await showDialog<bool>(
      context: context,
      builder: (context) => AlertDialog(
        title: const Text('ê±°ë˜ ì‚­ì œ'),
        content: const Text(
          'ì´ ê±°ë˜ë¥¼ ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\nì‚­ì œëœ ê±°ë˜ëŠ” ë³µêµ¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.',
        ),
        actions: [
          TextButton(
            onPressed: () => Navigator.pop(context, false),
            child: const Text('ì·¨ì†Œ'),
          ),
          TextButton(
            onPressed: () => Navigator.pop(context, true),
            style: TextButton.styleFrom(foregroundColor: Colors.red),
            child: const Text('ì‚­ì œ'),
          ),
        ],
      ),
    );
    
    if (confirmed == true && context.mounted) {
      await _deleteTransaction(context, ref);
    }
  }
  
  Future<void> _deleteTransaction(BuildContext context, WidgetRef ref) async {
    try {
      final service = ref.read(supabaseServiceProvider);
      final transaction = await ref.read(
        transactionProvider(transactionId).future,
      );
      
      await service.deleteTransaction(transactionId);
      
      // Provider ê°±ì‹ 
      ref.invalidate(transactionsProvider(transaction.customerId));
      ref.invalidate(customerProvider(transaction.customerId));
      
      if (context.mounted) {
        context.pop();
        ScaffoldMessenger.of(context).showSnackBar(
          const SnackBar(content: Text('ê±°ë˜ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤')),
        );
      }
    } catch (e) {
      if (context.mounted) {
        ScaffoldMessenger.of(context).showSnackBar(
          SnackBar(content: Text('ì‚­ì œ ì‹¤íŒ¨: $e')),
        );
      }
    }
  }
}
```

---

## 10. í…ŒìŠ¤íŠ¸ ë° ë°°í¬

### 10.1 ë‹¨ìœ„ í…ŒìŠ¤íŠ¸

```dart
// test/services/supabase_service_test.dart
import 'package:flutter_test/flutter_test.dart';
import 'package:trade_master/services/supabase_service.dart';

void main() {
  group('SupabaseService', () {
    late SupabaseService service;
    
    setUp(() {
      service = SupabaseService();
    });
    
    test('ê¸ˆì•¡ í¬ë§·ì´ ì˜¬ë°”ë¥´ê²Œ ë™ì‘í•˜ëŠ”ì§€', () {
      expect(service.formatAmount(1000), '1,000');
      expect(service.formatAmount(1234567), '1,234,567');
    });
    
    // ë” ë§ì€ í…ŒìŠ¤íŠ¸...
  });
}
```

### 10.2 Play Store ì¶œì‹œ ì¤€ë¹„

#### Step 1: ì•± ì•„ì´ì½˜ ìƒì„±

```yaml
# pubspec.yaml
dev_dependencies:
  flutter_launcher_icons: ^0.13.0

flutter_launcher_icons:
  android: true
  ios: false
  image_path: "assets/icon/app_icon.png"
  adaptive_icon_background: "#FFFFFF"
  adaptive_icon_foreground: "assets/icon/app_icon_foreground.png"
```

```bash
flutter pub run flutter_launcher_icons
```

#### Step 2: ì•± ì„œëª…

```bash
# í‚¤ìŠ¤í† ì–´ ìƒì„±
keytool -genkey -v -keystore ~/upload-keystore.jks \
  -keyalg RSA -keysize 2048 -validity 10000 \
  -alias upload

# android/key.properties íŒŒì¼ ìƒì„±
storePassword=<ë¹„ë°€ë²ˆí˜¸>
keyPassword=<ë¹„ë°€ë²ˆí˜¸>
keyAlias=upload
storeFile=<í‚¤ìŠ¤í† ì–´ ê²½ë¡œ>
```

#### Step 3: ë¦´ë¦¬ì¦ˆ ë¹Œë“œ

```bash
# AAB íŒŒì¼ ìƒì„± (Play Store ê¶Œì¥)
flutter build appbundle --release

# ìƒì„±ëœ íŒŒì¼ ìœ„ì¹˜
# build/app/outputs/bundle/release/app-release.aab
```

#### Step 4: Play Console ì—…ë¡œë“œ

```
1. Google Play Console ì ‘ì†
2. ì•± ë§Œë“¤ê¸°
3. ì•± ì •ë³´ ì…ë ¥:
   - ì•± ì´ë¦„: ê±°ë˜ì˜ì¥ì¸
   - ì„¤ëª…: ê±°ë˜ì²˜ ê´€ë¦¬ë¥¼ ì‰½ê³  ê°„í¸í•˜ê²Œ
   - ì¹´í…Œê³ ë¦¬: ë¹„ì¦ˆë‹ˆìŠ¤
4. ìŠ¤í¬ë¦°ìƒ· ì—…ë¡œë“œ (ìµœì†Œ 2ê°œ)
5. AAB íŒŒì¼ ì—…ë¡œë“œ
6. ê²€í†  ì œì¶œ
```

---

## 11. Phaseë³„ ê°œë°œ ë¡œë“œë§µ

### Phase 1: MVP (6ì£¼)

#### Week 1-2: ê¸°ë³¸ CRUD
```
âœ… ê°œë°œ í™˜ê²½ ì„¤ì •
âœ… Supabase í”„ë¡œì íŠ¸ ìƒì„±
âœ… ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ êµ¬ì¶•
âœ… ì‚¬ìš©ì ì¸ì¦ (ë¡œê·¸ì¸/íšŒì›ê°€ì…)
âœ… ì‚¬ì—…ì¥ ì •ë³´ ì…ë ¥
âœ… ê±°ë˜ì²˜ CRUD
```

#### Week 3: í’ˆëª© ê´€ë¦¬
```
âœ… í’ˆëª© ë“±ë¡/ìˆ˜ì •/ì‚­ì œ
âœ… í’ˆëª© ëª©ë¡ ì¡°íšŒ
âœ… í’ˆëª© ì¹´í…Œê³ ë¦¬ ê´€ë¦¬
âœ… í’ˆëª©ë³„ ê¸°ë³¸ ë‹¨ê°€ ì„¤ì •
```

#### Week 4: ê±°ë˜ ê´€ë¦¬
```
âœ… ê±°ë˜ ì…ë ¥ í™”ë©´ (í’ˆëª© ì„ íƒ ì˜µì…˜)
âœ… ê±°ë˜ ëª©ë¡ ì¡°íšŒ
âœ… ê±°ë˜ ìˆ˜ì • ê¸°ëŠ¥
âœ… ê±°ë˜ ì‚­ì œ ê¸°ëŠ¥ (í™•ì¸ ë‹¤ì´ì–¼ë¡œê·¸)
âœ… ê±°ë˜ì²˜ë³„ ì”ì•¡ ê³„ì‚°
```

#### Week 5: ê³µìœ  ê¸°ëŠ¥ â­
```
âœ… ì˜ìˆ˜ì¦ ìœ„ì ¯ ë””ìì¸ (í’ˆëª© ì •ë³´ í¬í•¨)
âœ… ìŠ¤í¬ë¦°ìƒ· ìº¡ì²˜ ê¸°ëŠ¥
âœ… ì‹œìŠ¤í…œ ê³µìœ  ì‹œíŠ¸ ì—°ë™
âœ… ì¹´ì¹´ì˜¤í†¡ ê³µìœ  í…ŒìŠ¤íŠ¸
```

#### Week 6: í…ŒìŠ¤íŠ¸ & ì¶œì‹œ
```
âœ… ë²„ê·¸ ìˆ˜ì •
âœ… UI/UX ê°œì„ 
âœ… ë² íƒ€ í…ŒìŠ¤íŠ¸ (ì§€ì¸ 5ëª…)
âœ… í”¼ë“œë°± ë°˜ì˜
âœ… Play Store ì¶œì‹œ
```

### Phase 2: ê¸°ëŠ¥ í™•ì¥ (3ê°œì›”)

```
â–¡ ë‹¤ì¤‘ ì‚¬ìš©ì
  - ì§ì› ì´ˆëŒ€ ê¸°ëŠ¥
  - ì—­í• ë³„ ê¶Œí•œ ê´€ë¦¬
  - í™œë™ ë¡œê·¸

â–¡ í†µê³„ & ë¶„ì„
  - ì›”ë³„ ë§¤ì¶œ ì°¨íŠ¸
  - ê±°ë˜ì²˜ë³„ ë¶„ì„
  - í’ˆëª©ë³„ íŒë§¤ í†µê³„
  - ì—‘ì…€ ë‚´ë³´ë‚´ê¸°

â–¡ ì•Œë¦¼ ê¸°ëŠ¥
  - í‘¸ì‹œ ì•Œë¦¼
  - ì™¸ìƒ ë§Œê¸° ì•Œë¦¼

â–¡ ì¬ê³  ê´€ë¦¬
  - í’ˆëª©ë³„ ì¬ê³  ì¶”ì 
  - ì¬ê³  ë¶€ì¡± ì•Œë¦¼
```

### Phase 3: í”„ë¦¬ë¯¸ì—„ ê¸°ëŠ¥ (6ê°œì›”)

```
â–¡ ì–‘ë°©í–¥ ê±°ë˜ í™•ì¸
  - ê±°ë˜ì²˜ ì´ˆëŒ€
  - ê±°ë˜ ìŠ¹ì¸/ê±°ì ˆ
  - ì‹¤ì‹œê°„ ë™ê¸°í™”

â–¡ ê³ ê¸‰ ë¶„ì„
  - AI ê¸°ë°˜ ì˜ˆì¸¡
  - ìˆ˜ìµì„± ë¶„ì„
  - íŠ¸ë Œë“œ ë¶„ì„

â–¡ ì—°ë™ ê¸°ëŠ¥
  - ì¹´ì¹´ì˜¤ ì•Œë¦¼í†¡
  - ì „ìì„¸ê¸ˆê³„ì‚°ì„œ
  - ì€í–‰ ê³„ì¢Œ ì—°ë™
```

---

## 12. ìì£¼ ë¬»ëŠ” ì§ˆë¬¸

### Q1: Flutterë¥¼ ì²˜ìŒ ë°°ìš°ëŠ”ë° ì´ í”„ë¡œì íŠ¸ë¥¼ ë”°ë¼í•  ìˆ˜ ìˆë‚˜ìš”?

**A:** ë„¤! ì´ ë¬¸ì„œëŠ” ì´ˆë³´ìë„ ë”°ë¼í•  ìˆ˜ ìˆë„ë¡ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¨ê³„ë³„ë¡œ ë”°ë¼í•˜ì‹œê³ , ë§‰íˆëŠ” ë¶€ë¶„ì€ Flutter ê³µì‹ ë¬¸ì„œë‚˜ ì»¤ë®¤ë‹ˆí‹°ì— ì§ˆë¬¸í•˜ì„¸ìš”.

### Q2: Supabase ë¬´ë£Œ í”Œëœìœ¼ë¡œë„ ì¶©ë¶„í•œê°€ìš”?

**A:** ë„¤, MVP ë‹¨ê³„ì—ì„œëŠ” ë¬´ë£Œ í”Œëœìœ¼ë¡œ ì¶©ë¶„í•©ë‹ˆë‹¤. ë¬´ë£Œ í”Œëœ ì œí•œ:
- ë°ì´í„°ë² ì´ìŠ¤: 500MB
- ì›”ê°„ ì‚¬ìš©ì: 50,000ëª…
- ì›”ê°„ ëŒ€ì—­í­: 2GB

### Q3: iOS ì•±ì€ ì–¸ì œ ì¶œì‹œí•˜ë‚˜ìš”?

**A:** Phase 1ì—ì„œëŠ” Androidë§Œ ì¶œì‹œí•©ë‹ˆë‹¤. Androidì—ì„œ ì•ˆì •í™”ëœ í›„ iOSë¡œ í™•ì¥í•  ì˜ˆì •ì…ë‹ˆë‹¤.

### Q4: í’ˆëª© ê´€ë¦¬ëŠ” ì™œ Phase 1ì— í¬í•¨ë˜ì—ˆë‚˜ìš”?

**A:** ì‹¤ì œ ì‚¬ìš©ì í”¼ë“œë°± ê²°ê³¼, í’ˆëª©ë³„ ê±°ë˜ ê´€ë¦¬ê°€ í•µì‹¬ ê¸°ëŠ¥ìœ¼ë¡œ íŒë‹¨ë˜ì–´ Phase 1ì— í¬í•¨í–ˆìŠµë‹ˆë‹¤. í’ˆëª© ì—†ì´ë„ ì‚¬ìš© ê°€ëŠ¥í•˜ì§€ë§Œ, í’ˆëª©ì„ í™œìš©í•˜ë©´ í›¨ì”¬ íš¨ìœ¨ì ì…ë‹ˆë‹¤.

### Q5: ë°ì´í„°ëŠ” ì•ˆì „í•œê°€ìš”?

**A:** ë„¤, SupabaseëŠ” AWS ì¸í”„ë¼ë¥¼ ì‚¬ìš©í•˜ë©°, ëª¨ë“  ë°ì´í„°ëŠ” ì•”í˜¸í™”ë©ë‹ˆë‹¤. ë˜í•œ RLS(Row Level Security)ë¡œ ë‚´ ë°ì´í„°ë§Œ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

---

## 13. ì¶”ê°€ ë¦¬ì†ŒìŠ¤

### ğŸ“š í•™ìŠµ ìë£Œ

- [Flutter ê³µì‹ ë¬¸ì„œ](https://docs.flutter.dev/)
- [Riverpod ê³µì‹ ë¬¸ì„œ](https://riverpod.dev/)
- [Supabase ê³µì‹ ë¬¸ì„œ](https://supabase.com/docs)
- [Dart ì–¸ì–´ íˆ¬ì–´](https://dart.dev/guides/language/language-tour)

### ğŸ› ï¸ ìœ ìš©í•œ ë„êµ¬

- [Flutter DevTools](https://docs.flutter.dev/tools/devtools) - ë””ë²„ê¹… ë„êµ¬
- [Postman](https://www.postman.com/) - API í…ŒìŠ¤íŠ¸
- [DartPad](https://dartpad.dev/) - ì˜¨ë¼ì¸ Dart ì—°ìŠµ
- [Figma](https://www.figma.com/) - UI/UX ë””ìì¸

### ğŸ‘¥ ì»¤ë®¤ë‹ˆí‹°

- [Flutter í•œêµ­ ì‚¬ìš©ì ê·¸ë£¹](https://www.facebook.com/groups/flutterkorea)
- [Flutter Discord](https://discord.gg/flutter)
- [Stack Overflow](https://stackoverflow.com/questions/tagged/flutter)

---

## 14. ë§ˆë¬´ë¦¬

### í•µì‹¬ ì›ì¹™

1. **ê°„ë‹¨í•¨ì´ ìµœê³ **: MVPëŠ” ìµœì†Œí•œì˜ ê¸°ëŠ¥ìœ¼ë¡œ
2. **ì‚¬ìš©ì ì¤‘ì‹¬**: ì‹¤ì œ ì‚¬ìš©ìì˜ ë‹ˆì¦ˆì— ì§‘ì¤‘
3. **ë¹ ë¥¸ ë°˜ë³µ**: ì¶œì‹œ í›„ í”¼ë“œë°±ìœ¼ë¡œ ê°œì„ 

### ê°œë°œ ìˆœì„œ

```
1. í™˜ê²½ ì„¤ì • â†’ 2. ë°ì´í„°ë² ì´ìŠ¤ â†’ 3. ì¸ì¦
â†’ 4. ê±°ë˜ì²˜ CRUD â†’ 5. í’ˆëª© CRUD â†’ 6. ê±°ë˜ CRUD
â†’ 7. ê³µìœ  ê¸°ëŠ¥ â†’ 8. í…ŒìŠ¤íŠ¸ â†’ 9. ì¶œì‹œ
```

### ì„±ê³µì„ ìœ„í•œ ì¡°ì–¸

- âœ… ë§¤ì¼ ì¡°ê¸ˆì”© ê¾¸ì¤€íˆ ê°œë°œí•˜ê¸°
- âœ… ë§‰íˆë©´ ê³µì‹ ë¬¸ì„œ ë¨¼ì € í™•ì¸í•˜ê¸°
- âœ… ì»¤ë®¤ë‹ˆí‹°ì— ì ê·¹ì ìœ¼ë¡œ ì§ˆë¬¸í•˜ê¸°
- âœ… ì‘ì€ ì„±ê³µì„ ì¶•í•˜í•˜ë©° ë™ê¸°ë¶€ì—¬ ìœ ì§€í•˜ê¸°

**í™”ì´íŒ…! ğŸš€**

---

## ë¬¸ì„œ ì •ë³´

- **ë²„ì „**: 2.0
- **ìµœì¢… ìˆ˜ì •**: 2024-11-15
- **ì£¼ìš” ë³€ê²½ì‚¬í•­**:
  - Phase 1ì— í’ˆëª© ê´€ë¦¬ í¬í•¨
  - ê±°ë˜ CRUD ì™„ì „ êµ¬í˜„ (ìˆ˜ì •/ì‚­ì œ ì¶”ê°€)
  - DB ì„¤ê³„ì— products í…Œì´ë¸” ì¶”ê°€
  - transactions í…Œì´ë¸”ì— í’ˆëª© ê´€ë ¨ ì»¬ëŸ¼ ì¶”ê°€
  - ê°œë°œ ê¸°ê°„ 6ì£¼ë¡œ ì¡°ì •
- **ë‹¤ìŒ ì—…ë°ì´íŠ¸**: Phase 1 ì™„ë£Œ í›„
